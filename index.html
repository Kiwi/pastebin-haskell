<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Paste</title>
<style>
html, body {
	width: 100%;
}

header#topbar {
	background-color: #3e3a3f;
	padding: 20px 40px 20px 25px;
	color: white;
	font-size: 14pt;
}

header#topbar a {
	color: #bbf;
}

#main {
	max-width: 1000px;
	margin: 0 auto 30px auto;
}

.bodytext {
	margin: 16px 15px;
}

#pasteform {
	margin: 0 15px;
}

.filecontainer {
	margin-bottom: 20px;
}

.fileborder {
	/* display: inline-block; */
	/* padding: 10px; */
	border: 1px #ddd solid;
	border-radius: 5px;
}

.fnamecontainer {
	background-color: #eee;
	padding: 5px 10px;
}

.removebtn {
	float: right;
	cursor: pointer;
	font-weight: bold;
	font-family: sans-serif;
	font-size: 18px;
	color: #555;
}

.removebtn:hover {
	color: #888;
}

.codearea {
	width: 100%;
	height: 20em;
}

#submit-row button {
	margin: 0;  /* purecss gives submit/normal buttons different margins on narrow screens; don't do that */
}

#submit-row > div:last-child {
	text-align: right;
}
</style>
<link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css" integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
<script>
var nextId = 2;

function makeFileContainer(index) {
	var div = document.getElementById("filecontainer_template").cloneNode(true);
	div.id = "filecontainer" + index;
	div.classList.remove("hidden");
	div.querySelector("input").name = "name" + index;
	div.querySelector("textarea").name = "code" + index;
	div.querySelector(".removebtn").addEventListener("click", function() { doRemovefile(index); });
	return div;
}

function doAddfile() {
	var parent = document.getElementById("filecontainers");
	parent.appendChild(makeFileContainer(nextId++));
}

function doRemovefile(index) {
	var div = document.getElementById("filecontainer" + index);
	if (div.querySelector("textarea").value.trim() != "") {
		if (!confirm("Remove this file from the paste?")) return;
	}
	div.parentNode.removeChild(div);
}
</script>
</head>
<body>
<header id="topbar">
	<b>Paste for <code>#haskell</code></b>
	<div style="float: right">
		<small><i>Open source: <a href="https://github.com/tomsmeding/pastebin-haskell">github</a></i></small>
	</div>
</header>

<div id="main">
	<div class="bodytext">
		<h3 id="help-us-help-you">Help us help you</h3>
		<p>Include in your paste:</p>
		<ul>
			<li>your code</li>
			<li>a brief description for what you are trying to do</li>
			<li>how it failed, such as error messages.</li>
		</ul>
		<p>Please enjoy <a href="https://www.chiark.greenend.org.uk/~sgtatham/bugs.html">this</a> classic 5-min read. It is about bug reports, but asking good questions is quite a similar process.</p>
		<h3 id="for-installation-and-project-management">For installation and project management</h3>
		<p>Include separately in your paste (if you have them):</p>
		<ul>
			<li>stack.yaml</li>
			<li>*.cabal</li>
			<li>cabal.project</li>
		</ul>
	</div>

	<form id="pasteform" method="POST" action="/paste" class="pure-form">
		<div id="filecontainers">
			<div id="filecontainer1" class="filecontainer">
				<div class="fileborder">
					<div class="fnamecontainer">
						File name: <input type="text" name="name1" placeholder="(optional)">
					</div>
					<textarea class="codearea" name="code1"></textarea>
				</div>
			</div>
		</div>
		<br>
		<div id="submit-row" class="pure-g">
			<div class="pure-u-1-2">
				<button type="button" class="pure-button" onclick="doAddfile()"><b>+</b> Add another file</button>
			</div>
			<div class="pure-u-1-2">
				<button type="submit" class="pure-button pure-button-primary">Submit</button>
			</div>
		</div>
	</form>
</div>

<!-- template for creating new file containers -->
<div id="filecontainer_template" class="filecontainer hidden">
	<div class="fileborder">
		<div class="fnamecontainer">
			<div class="removebtn">x</div>
			File name: <input type="text" name="name1" placeholder="(optional)">
		</div>
		<textarea class="codearea" name="code1"></textarea>
	</div>
</div>
</body>
</html>
